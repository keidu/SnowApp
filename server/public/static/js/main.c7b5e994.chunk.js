(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{114:function(e,t,a){},115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),s=a.n(l),o=a(7),i=a(8),c=a(11),u=a(10),d=a(12),m=a(37),h=a(39),p=a.n(h),g=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e){return t._service.post("/auth/signup",{user:e})},this.editUser=function(e){return t._service.post("/auth/editUser",{user:e})},this.login=function(e,a){return t._service.post("/auth/login",{username:e,password:a})},this.loggedin=function(){return t._service.get("/auth/loggedin")},this.logout=function(){return t._service.post("/auth/logout")},this.viewProfile=function(e){return t._service.get("/auth/view/".concat(e))},this._service=p.a.create({baseURL:"https://snow-app.herokuapp.com/api",withCredentials:!0})},E=a(123),f=a(122),v=a(13),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).logoutUser=function(){a._service.logout().then((function(e){return a.props.setUser(!1)})).catch((function(e){return console.log(e)}))},a._service=new g,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.loggedInUser?this.props.loggedInUser.username:"Guest";return this.props.loggedInUser?r.a.createElement(E.a,{bg:"dark",variant:"dark",expand:"md"},r.a.createElement(E.a.Brand,null,"SnowApp"),r.a.createElement(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(E.a.Collapse,null,r.a.createElement(f.a,{className:"mr-auto"},r.a.createElement(f.a.Link,{as:"li"},r.a.createElement(v.b,{to:"/"},"Index")),r.a.createElement(f.a.Link,{as:"li"},r.a.createElement(v.b,{to:"/profile"},"Profile")),r.a.createElement(f.a.Link,{as:"li",onClick:this.logoutUser},"Logout")),r.a.createElement(f.a,{className:"ml-auto"},r.a.createElement(E.a.Text,null,"Welcome ",e)))):r.a.createElement(E.a,{bg:"dark",variant:"dark",expand:"md"},r.a.createElement(E.a.Brand,null,"Snow App!"),r.a.createElement(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(E.a.Collapse,null,r.a.createElement(f.a,{className:"mr-auto"},r.a.createElement(f.a.Link,{as:"li"},r.a.createElement(v.b,{to:"/"},"Index")),r.a.createElement(f.a.Link,{as:"li"},r.a.createElement(v.b,{to:"/signup"},"Register")),r.a.createElement(f.a.Link,{as:"li"},r.a.createElement(v.b,{to:"/login"},"Login"))),r.a.createElement(f.a,{className:"ml-auto"},r.a.createElement(E.a.Text,null,"Welcome ",e))))}}]),t}(n.Component),U=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Snow App!"))},C=a(117),I=function(e){return console.log(e),e.loggedInUser.age>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Welcome ",e.loggedInUser.username),r.a.createElement("h1",null,"Email :",e.loggedInUser.email),r.a.createElement("h1",null,"Your are ",e.loggedInUser.age," years old"),r.a.createElement("h1",null,"Your skill level is :",e.loggedInUser.level),r.a.createElement("img",{src:e.loggedInUser.imgPath,alt:""}),r.a.createElement(C.a,{variant:"dark",as:v.b,to:"/editUser"},"Edit profile"),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(C.a,{variant:"dark",as:v.b,to:"/createLesson"},"Create lesson demand"),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(C.a,{variant:"dark",as:v.b,to:"/main"},"View lesson offers")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Welcome ",e.loggedInUser.username),r.a.createElement("h1",null,"Email :",e.loggedInUser.email),r.a.createElement("h1",null,"Your experience is :",e.loggedInUser.experience),r.a.createElement("img",{src:e.loggedInUser.imgPath,alt:""}),r.a.createElement(C.a,{variant:"dark",as:v.b,to:"/editUser"},"Edit profile"),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(C.a,{variant:"dark",as:v.b,to:"/createLesson"},"Create lesson offer"),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(C.a,{variant:"dark",as:v.b,to:"/main"},"View lesson demands"))},w=a(22),L=a(121),O=a(118),j=function e(){var t=this;Object(o.a)(this,e),this.handleUpload=function(e){return t._service.post("/files/upload",e)},this._service=p.a.create({baseURL:"https://snow-app.herokuapp.com/api",withCredentials:!0})},k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a._service.signup(a.state).then((function(e){a.props.setUser(e.data),a.setState({username:"",password:"",age:"",level:"",email:"",experience:"",role:"",imgPath:""}),a.props.history.push("/profile")})).catch((function(e){return console.log(e.response.data.message)}))},a.handleFileUpload=function(e){var t=new FormData;t.append("imgPath",e.target.files[0]),console.log(e.target.files),a.FilesService.handleUpload(t).then((function(e){return a.setState({imgPath:e.data.secure_url})})).catch((function(e){return console.log(e)}))},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a.renderSpecificFields=function(){return"Teacher"===a.state.role?a.renderTeacherFields():a.renderUserFields()},a.renderTeacherFields=function(){return r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Experience as teacher"),r.a.createElement(L.a.Control,{type:"text",name:"experience",onChange:a.handleInputChange,value:a.state.experience}))},a.renderUserFields=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Age"),r.a.createElement(L.a.Control,{type:"number",name:"age",onChange:a.handleInputChange,value:a.state.age})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Level"),r.a.createElement(L.a.Control,{as:"select",onChange:a.handleInputChange,name:"level"},r.a.createElement("option",{type:"text"}),r.a.createElement("option",{type:"text"},"Amateur"),r.a.createElement("option",{type:"text"},"Medium"),r.a.createElement("option",{type:"text"},"Pro"))))},a._service=new g,a.FilesService=new j,a.state={username:"",password:"",age:"",level:"",email:"",experience:"",role:"",imgPath:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement(L.a.Label,null,"Select Role"),r.a.createElement(L.a.Control,{as:"select",onChange:this.handleInputChange,name:"role"},r.a.createElement("option",{type:"text"}),r.a.createElement("option",{type:"text"},"Teacher"),r.a.createElement("option",{type:"text"},"User")),r.a.createElement(L.a,{onSubmit:this.handleSubmit},r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"User name"),r.a.createElement(L.a.Control,{type:"text",name:"username",onChange:this.handleInputChange,value:this.state.username})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Password"),r.a.createElement(L.a.Control,{type:"password",name:"password",onChange:this.handleInputChange,value:this.state.password})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Email"),r.a.createElement(L.a.Control,{type:"email",name:"email",onChange:this.handleInputChange,value:this.state.email})),this.renderSpecificFields(),r.a.createElement(L.a.Group,{action:"/upload",method:"post",enctype:"multipart/form-data"},r.a.createElement(L.a.Label,{for:"file"},"Imagen de perfil:"),r.a.createElement(L.a.Control,{name:"imgPath",type:"file",onChange:this.handleFileUpload})),r.a.createElement(C.a,{variant:"dark",type:"submit"},"Register")))}}]),t}(n.Component),y=a(49),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({user:Object(y.a)({},a.state.user,Object(w.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.user,n=t.username,r=t.password;a._service.login(n,r).then((function(e){a.props.setUser(e.data),a.setState({username:"",password:""}),a.props.history.push("/profile")}))},a._service=new g,a.state={user:{username:"",password:""}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement("h1",null,"Log in"),r.a.createElement(L.a,{onSubmit:this.handleSubmit},r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"User name"),r.a.createElement(L.a.Control,{type:"text",name:"username",onChange:this.handleInputChange,value:this.state.username})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Password"),r.a.createElement(L.a.Control,{type:"text",name:"password",onChange:this.handleInputChange,value:this.state.password})),r.a.createElement(C.a,{variant:"dark",type:"submit"},"Log in")))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a._service.editUser(a.state).then((function(e){a.setState({username:"",email:"",age:"",level:"",experience:""},(function(){return a.props.setUser(e.data)})),a.props.history.push("/profile")})).catch((function(e){return console.log({err:e})}))},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a.renderSpecificFields=function(){return a.props.loggedInUser.age>0?a.renderTeacherFields():a.renderUserFields()},a.renderUserFields=function(){return r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Experience as teacher"),r.a.createElement(L.a.Control,{type:"text",name:"experience",onChange:a.handleInputChange,value:a.state.experience}))},a.renderTeacherFields=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Age"),r.a.createElement(L.a.Control,{type:"number",name:"age",onChange:a.handleInputChange,value:a.state.age})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Skill level"),r.a.createElement(L.a.Control,{as:"select",onChange:a.handleInputChange,value:a.state.level,name:"level"},r.a.createElement("option",{type:"text"}),r.a.createElement("option",{type:"text"},"Amateur"),r.a.createElement("option",{type:"text"},"Medium"),r.a.createElement("option",{type:"text"},"Pro"))))},a._service=new g,a.state={username:e.loggedInUser.username,email:e.loggedInUser.email,age:e.loggedInUser.age,level:e.loggedInUser.level,experience:e.loggedInUser.experience,role:e.loggedInUser.role},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("h1",null,"Edit User"),r.a.createElement(L.a,{onSubmit:this.handleSubmit},r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"User"),r.a.createElement(L.a.Control,{type:"text",name:"username",onChange:this.handleInputChange,value:this.state.username})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Email"),r.a.createElement(L.a.Control,{type:"text",name:"email",onChange:this.handleInputChange,value:this.state.email})),this.renderSpecificFields(),r.a.createElement(C.a,{variant:"dark",type:"submit"},"Editar"))))}}]),t}(n.Component),x=function e(){var t=this;Object(o.a)(this,e),this.getOne=function(e){return t._service.get("/lesson/".concat(e))},this.DeleteLesson=function(e){return t._service.post("/lesson/delete",{id:e})},this.newLesson=function(e,a,n,r,l,s){return t._service.post("/lesson/createLesson",{title:e,description:a,location:n,participants:r,user:s,date:l})},this.editLesson=function(e,a,n,r,l,s){return t._service.post("/lesson/edit",{id:e,title:a,description:n,location:r,participants:l,date:s})},this.editLesson=function(e,a,n,r,l,s){return t._service.post("/lesson/edit",{id:e,title:a,description:n,location:r,participants:l,date:s})},this.updateParticipants=function(e,a){return t._service.post("/lesson/signup",{id:e,participants:a})},this.getAllLessons=function(){return t._service.get("/lesson/getAllLessons")},this._service=p.a.create({baseURL:"https://snow-app.herokuapp.com/api",withCredentials:!0})},F=a(119),D=a(120),P=a(53),T=a(16),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onClick=a.onClick.bind(Object(T.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onClick",value:function(){this.props.value.teacher?window.open("mailto:".concat(this.props.value.teacher.email)):window.open("mailto:".concat(this.props.value.user.email))}},{key:"render",value:function(){return r.a.createElement(C.a,{variant:"dark",target:"_blank",onClick:this.onClick},"Send Mail")}}]),t}(n.Component),B=a(77),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderEditButtonCondition=function(){return a.state.user&&a.state.user._id===a.state.loggedInUser._id?a.renderEditButton():a.state.teacher&&a.state.teacher._id===a.state.loggedInUser._id?a.renderEditButton():void 0},a.renderSendEmailCondition=function(){return a.state.user&&a.state.user._id!==a.state.loggedInUser._id?a.renderEmailButton():a.state.teacher&&a.state.teacher._id!==a.state.loggedInUser._id?a.renderEmailButton():void 0},a.renderEmailButton=function(){return r.a.createElement(G,{value:a.state})},a.renderEditButton=function(){return r.a.createElement(v.b,{to:"/delete/".concat(a.state._id)},r.a.createElement(C.a,{variant:"dark",type:"button"},"Edit Lesson"))},a.renderSignUpCondition=function(){return"User"===a.state.loggedInUser.role&&a.state.user&&a.state.user._id!==a.state.loggedInUser._id?a.renderSignUpButton():"User"===a.state.loggedInUser.role&&a.state.teacher&&a.state.teacher._id!==a.state.loggedInUser._id?a.renderSignUpButton():void 0},a.renderSignUpButton=function(){return r.a.createElement(C.a,{variant:"warning",onClick:a.SignUpHandler},"Sign up")},a.SignUpHandler=function(){var e=a.props._id,t=Object(P.a)(a.state.participantsRef).join(a.state.loggedInUser._id);a._service.updateParticipants(e,t).then((function(e){a.setState({participantsRef:e.data.participantsRef})}))},a.handleShow=function(){a.setState({showModal:!0})},a.handleClose=function(){return a.setState({showModal:!1})},a._service=new x,a.state={_id:e._id,loggedInUser:e.loggedInUser,title:e.title,description:e.description,location:e.location,participants:e.participants,participantsRef:e.participantsRef,user:e.creatorIdUser,teacher:e.creatorIdTeacher,date:e.date,showModal:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e;e=this.state.date?this.state.date.substr(0,10):null;var t=this.state.user?this.state.user.email:this.state.teacher.email;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{className:"post-card",md:6},r.a.createElement("h3",null,this.state.title),r.a.createElement("p",null,"Descripcion: ",this.state.description),r.a.createElement("p",null,"Localizacion: ",this.state.location),r.a.createElement("p",null,"Date: ",e),r.a.createElement(L.a.Group,null,r.a.createElement("p",null,"participants: ",this.state.participantsRef.length)),r.a.createElement("p",null,"mail: ",t),this.renderSendEmailCondition(),this.renderEditButtonCondition(),this.renderSignUpCondition(),r.a.createElement(C.a,{onClick:this.handleShow,variant:"dark",type:"button"},"Show participants"),r.a.createElement(C.a,{variant:"dark",as:v.b,to:"/view/".concat(this.props.creatorIdUser?this.props.creatorIdUser._id:this.props.creatorIdTeacher._id)},"Poster profile")),r.a.createElement(D.a,{show:this.state.showModal,onHide:this.handleClose},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,null,"Participants")),r.a.createElement(D.a.Body,null,this.state.participantsRef.map((function(e){return r.a.createElement(F.a,null,r.a.createElement(B.a,null,"Name: ",e.username),r.a.createElement(C.a,{variant:"dark",as:v.b,to:"/view/".concat(e._id)},"View profile"),r.a.createElement("br",null),r.a.createElement("br",null))}))),r.a.createElement(D.a.Footer,null,r.a.createElement(C.a,{onClick:this.handleClose},"Close"))))}}]),t}(n.Component),A=a(61),R=a(83),H=a.n(R),N=(a(112),Object(A.b)(H.a)),W=new Date,Y=String(W.getDate()).padStart(2,"0"),V=String(W.getMonth()+1).padStart(2,"0"),z=W.getFullYear();W=z+"-"+V+"-"+Y;var J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).updateLessonList=function(){var e,t=Object(P.a)(a.state.LessonCard);a.props.lessons.map((function(a){a.date&&(e=a.date.substr(0,10));var n={title:a.title,start:new Date("".concat(e," 09:00:00")),end:new Date("".concat(e," 18:00:00"))};t.push(n)})),a.setState({LessonCard:t})},a.componentDidMount=function(){return a.updateLessonList()},a.state={LessonCard:[{title:"Today",start:new Date("".concat(W," 10:22:00")),end:new Date("".concat(W," 10:42:00"))}],loggedInUser:a.props.loggedInUser,showLessons:!1,showCalendar:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{height:"50vh"},className:"calendar-container"},r.a.createElement(A.a,{localizer:N,events:this.state.LessonCard,startAccessor:"start",endAccessor:"end"}),this.props.lesson?this.props.lesson.map((function(e){return"".concat(e.time)})):null))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.updatePostList()},a.updatePostList=function(){a._service.getAllLessons().then((function(e){var t=e.data.filter((function(e){return e.creatorIdTeacher})),n=e.data.filter((function(e){return e.creatorIdUser})),r=a.props.loggedInUser._id,l=e.data.filter((function(e){if(e.creatorIdTeacher)return e.creatorIdTeacher._id===r})),s=e.data.filter((function(e){if(e.creatorIdUser)return e.creatorIdUser._id===r}));a.props.loggedInUser&&"Teacher"===a.props.loggedInUser.role?a.setState({lessons:n,ownLessons:l,allLessons:e.data}):a.setState({lessons:t,ownLessons:s,allLessons:e.data})})).catch((function(e){return console.log("Error",e)}))},a.renderOwnPosts=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Your own posts"),r.a.createElement(F.a,{lg:4},a.state.ownLessons.map((function(e){return r.a.createElement(M,Object.assign({key:e._id},e,{DeleteLesson:a.DeleteLessonHandler,loggedInUser:a.props.loggedInUser}))}))))},a.renderCondition=function(){return a.state.ownLessons?a.renderOwnPosts():null},a.handleShow=function(){return a.setState({showModal:!0})},a.handleClose=function(){return a.setState({showModal:!1})},a._service=new x,a.state={lessons:[],ownLessons:null,allLessons:[],showModal:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement("h1",null,"Dashboard"),r.a.createElement(C.a,{onClick:this.handleShow,variant:"dark",type:"button"},"View Calendar"),r.a.createElement(F.a,{lg:4},this.state.lessons.map((function(t){return r.a.createElement(M,Object.assign({key:t._id},t,{DeleteLesson:e.DeleteLessonHandler,loggedInUser:e.props.loggedInUser}))}))),this.renderCondition()),r.a.createElement(D.a,{show:this.state.showModal,onHide:this.handleClose},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,null,"Lesson calendar")),r.a.createElement(D.a.Body,null,r.a.createElement(J,{lessons:this.state.allLessons,loggedInUser:this.state.loggedInUser})),r.a.createElement(D.a.Footer,null,r.a.createElement(C.a,{onClick:this.handleClose},"Close"))))}}]),t}(r.a.Component),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),console.log(e.target);var t=a.state.post,n=t.title,r=t.description,l=t.location,s=t.participants,o=t.date;a._service.newLesson(n,r,l,s,o,a.props.loggedInUser).then((function(e){a.props.history.push("/main")})).catch((function(e){return console.log(e)}))},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({post:Object(y.a)({},a.state.post,Object(w.a)({},n,r))})},a.renderSpecificFields=function(){return a.props.loggedInUser&&"Teacher"===a.props.loggedInUser.role?a.renderTeacherFields():a.renderUserFields()},a.renderTeacherFields=function(){return r.a.createElement(L.a.Group,null,r.a.createElement("h1",null,"Post lesson offer"))},a.renderUserFields=function(){return r.a.createElement("h1",null,"Post lesson demand")},a._service=new x,a.state={post:{title:"",description:"",location:"",participants:0,date:Date}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.state),r.a.createElement(O.a,null,this.renderSpecificFields(),r.a.createElement(L.a,{onSubmit:this.handleSubmit},r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Title"),r.a.createElement(L.a.Control,{type:"text",name:"title",onChange:this.handleInputChange,value:this.state.title})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Description"),r.a.createElement(L.a.Control,{type:"text",name:"description",onChange:this.handleInputChange,value:this.state.description})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Location"),r.a.createElement(L.a.Control,{type:"text",name:"location",onChange:this.handleInputChange,value:this.state.location})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Date"),r.a.createElement(L.a.Control,{type:"date",name:"date",onChange:this.handleInputChange,value:this.state.date})),r.a.createElement(C.a,{variant:"dark",type:"submit"},"Publish")))}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a.updatePostList=function(){a._service.getAllLessons().then((function(e){var t=e.data.find((function(e){return e._id===a.props.match.params.id}));a.setState(t)})).catch((function(e){return console.log("Error",e)}))},a.editLessonHandler=function(){var e=a.props.match.params.id,t=a.state,n=t.title,r=t.description,l=t.location,s=t.participants,o=t.date;a._service.editLesson(e,n,r,l,s,o).then((function(e){return console.log(e)})).catch((function(e){return console.log({err:e})})),a.updatePostList(),a.props.history.push("/main")},a.DeleteLessonHandler=function(){a._service.DeleteLesson(a.props.match.params.id),a.updatePostList(),a.props.history.push("/main")},a._service=new x,a.state={_id:"",title:"",description:"",location:"",creatorIdUser:"",creatorIdTeacher:"",date:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.updatePostList(),this._service.getOne(this.props.match.params.id).then((function(t){return e.setState(t.data)})).catch((function(e){return console.log({err:e})}))}},{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement("h1",null,"Edit Lesson"),r.a.createElement(L.a,{onSubmit:this.handleSubmit},r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Title"),r.a.createElement(L.a.Control,{type:"text",name:"title",onChange:this.handleInputChange,value:this.state.title})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Description"),r.a.createElement(L.a.Control,{type:"text",name:"description",onChange:this.handleInputChange,value:this.state.description})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Location"),r.a.createElement(L.a.Control,{type:"text",name:"location",onChange:this.handleInputChange,value:this.state.location})),r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Label,null,"Date"),r.a.createElement(L.a.Control,{type:"date",name:"date",onChange:this.handleInputChange,value:this.state.date})),r.a.createElement(C.a,{variant:"warning",onClick:this.DeleteLessonHandler},"Delete"),r.a.createElement(C.a,{variant:"dark",onClick:this.editLessonHandler},"Save")))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._service=new g,a.state={user:{}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._service.viewProfile(this.props.match.params.id).then((function(t){e.setState({user:t.data})})).catch((function(e){return console.log({err:e})}))}},{key:"render",value:function(){return this.state.user&&!this.state.user.age?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"User name: ",this.state.user.username),r.a.createElement("h1",null,"Email :",this.state.user.email),r.a.createElement("h1",null,"Experience as teacher :",this.state.user.experience),r.a.createElement("img",{src:this.state.user.imgPath,alt:""}),r.a.createElement(C.a,{variant:"dark",as:v.b,to:"/main"},r.a.createElement(G,{value:this.state}),"Back")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"User name: ",this.state.user.username),r.a.createElement("h1",null,"Email :",this.state.user.email),r.a.createElement("h1",null,"User age",this.state.user.age," years old"),r.a.createElement("h1",null,"User skill level is :",this.state.user.level),r.a.createElement("img",{src:this.state.user.imgPath,alt:""}),r.a.createElement(G,{value:this.state}),r.a.createElement(C.a,{variant:"dark",as:v.b,to:"/main"},"Back"))}}]),t}(n.Component),X=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).setTheUser=function(t){e.setState({loggedInUser:t}),console.log("El m\xe9todo 'setTheUser' de App.js se ha invocado, pasando al estado 'loggedInUser:",e.state.loggedInUser)},e.fetchUser=function(){null===e.state.loggedInUser&&e._service.loggedin().then((function(t){return e.setState({loggedInUser:t.data})})).catch((function(t){e.setState({loggedInUser:!1}),console.log({err:t})}))},e.state={loggedInUser:null},e._service=new g,e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.fetchUser(),r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{loggedInUser:this.state.loggedInUser,setUser:this.setTheUser}),r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",component:U}),r.a.createElement(m.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(k,Object.assign({setUser:e.setTheUser},t))}}),r.a.createElement(m.b,{path:"/login",render:function(t){return r.a.createElement(S,Object.assign({setUser:e.setTheUser},t))}}),r.a.createElement(m.b,{path:"/profile",render:function(){return e.state.loggedInUser?r.a.createElement(I,{loggedInUser:e.state.loggedInUser}):r.a.createElement(m.a,{to:"/"})}}),r.a.createElement(m.b,{path:"/view/:id",render:function(t){return r.a.createElement(Q,Object.assign({loggedInUser:e.state.loggedInUser},t))}}),r.a.createElement(m.b,{path:"/editUser",render:function(t){return e.state.loggedInUser?r.a.createElement(_,Object.assign({loggedInUser:e.state.loggedInUser},t,{setUser:e.setTheUser})):r.a.createElement(m.a,{to:"/"})}}),r.a.createElement(m.b,{path:"/createLesson",render:function(t){return r.a.createElement(q,Object.assign({},t,{loggedInUser:e.state.loggedInUser}))}}),r.a.createElement(m.b,{path:"/delete/:id",render:function(t){return r.a.createElement(K,Object.assign({},t,{loggedInUser:e.state.loggedInUser}))}}),r.a.createElement(m.b,{path:"/edit/:id",render:function(t){return r.a.createElement(K,Object.assign({},t,{loggedInUser:e.state.loggedInUser}))}}),r.a.createElement(m.b,{path:"/signup/:id",render:function(t){return r.a.createElement(M,Object.assign({},t,{loggedInUser:e.state.loggedInUser}))}}),r.a.createElement(m.b,{path:"/main",render:function(t){return r.a.createElement($,Object.assign({},t,{loggedInUser:e.state.loggedInUser}))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(113),a(114);s.a.render(r.a.createElement(v.a,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},84:function(e,t,a){e.exports=a(115)}},[[84,1,2]]]);
//# sourceMappingURL=main.c7b5e994.chunk.js.map